# name: Create a release when PR is raised to main
# run-name: Build initiated by ${{ github.actor }}
# on:
#   pull_request:
#      branches:
#        - main
#   push:
#     branches:
#       - "release/**"
# permissions:
#   contents: read
#   packages: write
# jobs:
#   build:
#     runs-on: ubuntu-latest
#     if: >
#         (github.ref_type == 'branch' && startsWith(github.ref, 'refs/heads/release/'))
#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v2
#         with:
#           ref: ${{ github.ref }}
#       - name: Setup Java 17 and Maven
#         uses: actions/setup-java@v4
#         with:
#           distribution: 'oracle'
#           java-version: '17'
#           cache: 'maven'
#           cache-dependency-path: 'pom.xml'
#           server-id: github
#           settings-path: ${{ github.workspace }}
#       - name: Extract Version from Branch Name
#         id: extract_version
#         run: |
#           echo "VERSION=$(echo ${{ github.ref }} | sed 's|refs/heads/release/v||')" >> "$GITHUB_ENV"
#       - name: Extract version from pom.xml
#         id: extract_version
#         run: |
#           VERSION=$(mvn help:evaluate -Dexpression=project.version -q -DforceStdout)
#           echo "Extracted version is $VERSION"
#       - name: Create Release
#         uses: actions/create-release@v1
#         env:
#           GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
#         with:
#           tag_name: $VERSION
#           release_name: Release $VERSION
#           draft: false
#           prerelease: false
